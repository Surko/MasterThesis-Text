\chapter{Užívateľská príručka}\label{kapII}
\renewcommand{\figurename}{Obrázok}
\section{Grafické rozhranie aplikácie}
Nástroj Weka má implementované grafické rozhranie.
Tým, že sme vytvorili zásuvný modul do nástroja Weka je možné spustiť klasifikátor z grafického rozhrania. 

Uvítacia obrazovka, vykreslená na Obrázku \ref{fig:gui1}, umožňuje vytvárať modely kliknutímm na tlačítko \emph{Explorer} a testovať klasifikátory kliknutím na tlačítko \emph{Experimenter}. 

\begin{figure}[h]
\centering
\centerline{\mbox{\includegraphics[width=200pt]{../img/kapII/weka1.pdf}}}
\caption{Uvítacia obrazovka nástroja Weka.}\label{fig:gui1}
\end{figure}

\subsection*{Vytváranie modelov}
Po stlačení tlačítka \emph{Explorer} sa otvorí obrazovka z Obrázku \ref{fig:gui2}. V nej môžeme načítať (tlačítko \emph{Open file}) alebo vygenerovať (tlačítko Generate) dátovú množinu a tú ďalej predspracovať. Obrazovka obsahuje informácie o dátovej množine, ako je napríklad rozdelenie hodnôt pre atribúty. Predspracovanie dát môžeme vykonať pomocou tlačítka \emph{Edit}. Taktiež je možné vybrať iba určité atribúty, ktoré chceme použiť na klasifikáciu.

\begin{figure}[h]
\centering
\centerline{\mbox{\includegraphics[width=300pt]{../img/kapII/weka2.pdf}}}
\caption{Obrazovka, v ktorej načítame dáta a ďalej ich spracovávame.}\label{fig:gui2}
\end{figure}

Pre vytvorenie modelu pokračujeme zvolením záložky \emph{Classify}. Obrazovka na vytvorenie modelu vyzerá ako na Obrázku \ref{fig:gui3}. Tu môžeme zvoliť 
\begin{itemize}
\item typ klasifikátoru, ktorý chceme použiť. Výber klasifikátoru prevedieme kliknutím na tlačítko \emph{Choose}, ktoré otvorí sťahovacie menu rovnaké tomu na Obrázku \ref{fig:gui4},
\item akým spôsobom vytvárame a testujeme kvalitu vytvoreného modelu a akú dátovú množinu pritom použijeme. Medzi možnosti patrí:
\begin{itemize}
\item použiť trénovaciu množinu na vytvorenie modelu aj jeho otestovanie alebo
\item použiť trénovaciu množinu na vytvorenie modelu a dodatočne zadanú testovaciu množinu na jeho otestovanie, alebo
\item použiť $n$-násobnú krížovú validáciu, alebo
\item rozdeliť dátovú množinu na trénovaciu a testovaciu podmnožinu.
\end{itemize}
\item ktorý atribút bude výstupný.
\end{itemize}  

\begin{figure}[h!]
\centering
\centerline{\mbox{\includegraphics[width=300pt]{../img/kapII/weka3.pdf}}}
\caption{Obrazovka pre vytvorenie modelu, v ktorej volíme klasifikátor, ktorú množinu použijeme na otestovanie a ktorý atribút je výstupný.}\label{fig:gui3}
\end{figure}

\begin{figure}[h!]
\centering
\centerline{\mbox{\includegraphics[width=300pt]{../img/kapII/weka4.pdf}}}
\caption{Obrazovka s rozbaľovacím menu, v ktorej vyberáme klasifikátor.}\label{fig:gui4}
\end{figure}

Po zvolení algoritmu na vytvorenie modelu môžeme nastaviť jeho parametre. Po kliknutí na zvolený klasifikátor, vedľa tlačítka \emph{Choose}, sa objaví nová obrazovká rovnaká tej na Obrázku \ref{fig:gui5}. Nastavenie parametrov je bližšie spomenutý v oddieli \ref{kapII:config}.

Pre vytvorenie modelu stlačíme tlačítko \emph{Start}.

\begin{figure}[h!]
\centering
\centerline{\mbox{\includegraphics[width=300pt]{../img/kapII/weka5.pdf}}}
\caption{Príklad obrazovky, v ktorej nastavujeme parametre klasifikátoru -- a teda aj genetického algoritmu}\label{fig:gui5}
\end{figure}

\pagebreak

\subsection*{Testovanie modelov}
Po stlačení tlačítka \emph{Experimenter} dostaneme obrazovku z Obrázku \ref{fig:guie1}. Táto obrazovka je určená na testovanie modelov a ich porovnávanie. Na obrazovke môžeme zvoliť jednoduchý alebo pokročilý mód\footnote{Pokročilý mód poskytuje množstvo ďalších nastavení, ako napríklad rozloženie práce medzi viaceré počítače}. 
Pre vykonanie experimentu môžeme voliť z dvoch možností:
\begin{enumerate}
\item vytvoriť nový experiment (tlačítko \emph{New}) alebo
\item načítať existujúci experiment (tlačítko \emph{Open})
\end{enumerate} 

Podobne ako pri vytváraní modelov musíme
\begin{enumerate}
\item zvoliť algoritmy, ktoré budú použité na vytvorenie modelov (tlačítko \emph{Add new} v časti \emph{Algorithms}) a
\item načítať dátové množiny (tlačítko \emph{Add new} v časti \emph{Datasets}), na ktorých chceme vytvorené modely otestovať 
\end{enumerate}

Ďalej môžeme nastaviť typ experimentu, koľko krát bude experiment zopakovaný a akým spôsobom bude vykonaný (najprv množiny alebo najprv algoritmy). Medzi povolené typy experimentu patrí
\begin{enumerate}
\item $n$-násobná krížová validácia,
\item náhodné rozdelenie na trénovaciu a testovaciu množinu,
\item rozdelenie na trénovaciu a testovaciu množiny s rovnakým poradím
\end{enumerate}

\begin{figure}[h!]
\centering
\centerline{\mbox{\includegraphics[width=300pt]{../img/kapII/wekae1.pdf}}}
\caption{Obrazovka, ktorá slúži na testovanie algoritmov medzi sebou.}\label{fig:guie1}
\end{figure}

Príklad správne nastaveného experimentu je zobrazený na Obrázku \ref{fig:guie2}. Experiment vykoná 10-násobnú krížovú validáciu, pričom každá z nich je zopakovaná 10-krát. V experimente testujeme dva algoritmy (\verb|J48| a \verb|WekaEvolutionTreeClassifier|) na jednej dátovej množine (\verb|breast-cancer.arff|).

\begin{figure}[h!]
\centering
\centerline{\mbox{\includegraphics[width=300pt]{../img/kapII/wekae2.pdf}}}
\caption{Príklad obrazovky s nastavenými algoritmami a dátovou množinou na otestovanie.}\label{fig:guie2}
\end{figure}

Po nastavení experimentu stlačíme záložku \emph{Run}, ktorá zobrazí obrazovku, na ktorej spustíme experiment tlačítkom \emph{Start}. Po dokončení experimentu bez nejakých chýb dostaneme obrazovka, ktorá vyzerá ako na Obrázku \ref{fig:guie3}.

\begin{figure}[h!]
\centering
\centerline{\mbox{\includegraphics[width=300pt]{../img/kapII/wekae3.pdf}}}
\caption{Obrazovka, ktorá slúži na spustenia alebo zastavenie experimentu.}\label{fig:guie3}
\end{figure}

Nakoniec stlačíme záložku \emph{Analyse}, ktorá otvorí obrazovku, na ktorej môžeme zanalyzovať výsledky experimentu. Najprv je ale nutné načítať výsledky stlačením tlačítka \emph{Experiment}. Následne môžeme nastaviť, ktorú vlastnosť by sme chceli otestovať (napr. presnosť, veľkosť stromov), typ testu, jeho hladinu významnosti a iné. Výsledok zobrazíme pomocou tlačítka \emph{Perform test}. Typická obrazovka s vykonaným testom vyzerá ako na Obrázku \ref{fig:guie4}.

\begin{figure}[h!]
\centering
\centerline{\mbox{\includegraphics[width=300pt]{../img/kapII/wekae4.pdf}}}
\caption{Príklad obrazovky s vykonaným testom, ktorý porovnáva presnosť modelov, pričom na testovanie používame opravený párový t-test s hladinou významnosti 0.05.}\label{fig:guie4}
\end{figure}

\pagebreak

\section{Konzolové rozhranie aplikácie}
\begin{observation}
Povinné príkazy budeme v nasledujúcich častiach uvádzať bez zmeny. Nepovinné súčasti príkazu budeme uvádzať v hranatých zátvorkách.
\end{observation}

Nástroj Weka je možné spustiť s našou aplikáciou \verb|GenDTLib| z príkazového riadku pomocou príkazu

\begin{figure}[h!]
\centering
\begin{tabular}{|l|}
\hline
\texttt{java [parametre JVM] -cp "weka.jar;GenLib.jar"}  \\
\texttt{klasifikátor [parametre klasifikátoru]} \\
\texttt{[-t *.arff] [-T *.arff] [-h]} \\
\hline
\end{tabular}
\caption{}
\end{figure}

Nastavenie parametrov JVM nie je povinné a vo väčšine prípadov stačí to štandardné. V prípade, keď program skončí s výnimkou OutOfMemoryError, je potrebné zväčšiť hodnoty minimálnej a maximálnej hodnoty pamäte (parametre \verb|-Xms| a \verb|-Xmx|).

Povolené hodnoty argumentu \emph{klasifikátor} závisia od množiny klasifikátorov, ktoré sú registrované v nástroji Weka (súbor \verb|GenericPropertiesCreator.props|). Hodnoty na nastavenie majú štruktúru balíčkov z jazyka Java. Na spustenie nášho genetického algoritmu na tvorbu stromov volíme hodnotu klasifikátora ako \verb|genlib.classifier.weka.WekaEvolutionTreeClassifier|.

Parametre klasifikátoru je možné zobraziť pomocou argumentu \verb|-h|. Nastavenie parametrov uvádzame bližšie v oddieli \ref{kapII:config}. Tieto parametre sú ale nepovinné, pretože štandardne sa berú hodnoty zo súboru \verb|config.properties|.

Argumentom \verb|-t| definujeme akú trénovaciu množinu použijeme. Parametre tohoto argumentu sú relatívne cesty k súborom (s príponou \verb|arff|) s dátovými množinami.

Argumentom \verb|-T| definujeme akú testovaciu množinu použijeme. Parametre tohoto argumentu sú relatívne cesty k súborom (s príponou \verb|arff|) s dátovými množinami.

\section{Nastavenie argumentov genetického algoritmu}\label{kapII:config}
\begin{observation}
Pri nastavení argumentov genetického algoritmu budú hodnoty na vyplnenie v zložených zátvorkách.
\end{observation}

V implementačnej časti sme zaviedli požiadavky, ktoré si na aplikáciu kladieme. Jednou z nich bola možnosť nastaviť argumenty (parametre) genetického algoritmu. V tejto kapitole popíšeme argumenty algoritmu a aké hodnoty sú pre ne povolené. Názvy argumentov budú zodpovedať grafickému rozhraniu, no pre každý parameter uvedieme aj jeho ekvivalent v konzolovom rozhraní.

Nastavenie argumentov genetického algoritmu môžeme rozdeliť do  4 skupín:
\begin{enumerate}
\item Nastavenie číselného argumentu algoritmu (napr. počet generácii, veľkosť populácie)
\begin{center}
\texttt{\{argument\_algoritmu\}=\{číslo\}}
\end{center} 
\item Nastavenie objektového argumentu algoritmu (dátová množina)
\begin{center}
\texttt{\{argumentmeter\_algoritmu\}=\{parametre\}}
\end{center} 
\item Nastavenie argumentu, ktorý pracuje s komponentami
\begin{center}
\texttt{\{argument\_algoritmu\}=\{komponenta\} \{parametre\}}
\end{center}
\item Nastavenie argumentu, ktorý podporuje viac než jednu komponentu
\begin{center}
\texttt{\{argument\_algoritmu\}=\{komponenta1\} \{parametre1\}};
\texttt{\{komponenta2\} \{parametre2\};...}
\end{center}
\end{enumerate}

Hodnota na vyplnenie \texttt{\{parametre\}} môže byť nastavená ako:
\begin{itemize}
\item n-tica dvojíc parameter,hodnota
\begin{center}
\texttt{parametre := \{parameter1\},\{hodnota\_parametru1\},
\{parameter2\},\{hodnota\_parametru2\},...} 
\end{center}
\item n-tica hodnôt
\begin{center}
\texttt{parametre := \{hodnota1\},\{hodnota2\},...} 
\end{center}
\item bez parametru
\begin{center}
\texttt{parametre := x} 
\end{center}
\end{itemize}

\subsection{Argumenty}
Argumenty môžeme deliť podľa skupín spomínaných vyššie. Do skupiny 1 patria tieto argumenty:
\begin{enumerate}
\item \texttt{number-of-generations} -- počet generácií,
\item \texttt{pop-size} -- veľkosť populácie,
\item \texttt{elitism} -- predstavuje hodnotu elitizmu,
\item \texttt{fit-threads} -- počet vlákien použitých na počítanie fitness funkcií,
\item \texttt{gen-threads} -- počet vlákien použitých na vytvorenie počiatočnej populácie,
\item \texttt{classify} -- počet najlepších rozhodovacích stromov použitých na klasifikáciu. V tomto prípade bude genetický algoritmus fungovať podobne ako technika \emph{bagging}.
\end{enumerate}
Komplikovanejšie argumenty popíšeme v nasledujúcich úsekoch.

\subsubsection*{Dátová množina}
Argumentom \verb|data| (skupina 2.) definujeme ako bude rozdelená dátová množina na trénovaciu a validačnú podmnožinu. 
Dovolené parametre sú:
\begin{itemize}
\item \verb|TRAINRATIO| Podiel trénovacej množiny v dátach. Jeho hodnota je číslo z intervalu [0,1],
\item \verb|RESAMPLE| Podmnožiny sú vytvorené výberom s opakovaním. Jeho hodnota je typu boolean.
\end{itemize}

\subsubsection*{Fitness funkcie}
Argumentom \verb|fit-functions| (skupina 4.), definujeme fitness funkcie, ktoré budú použité na vyhodnotenie jedincov.
Dovolené komponenty sú 
\begin{itemize}
\item \verb|tAcc| -- presnosť rozhodovacieho stromu,
\item \verb|tSize|  -- počet vrcholov rozhodovacieho stromu,
\item \verb|tHeight| -- výška rozhodovacieho stromu,
\item \verb|tFMsr| -- f-miera rozhodovacieho stromu,
\item \verb|tTP| -- počet pravdivo pozitívnych inštancií,
\item \verb|tTN| -- počet pravdivo negatívnych inštancií,
\item \verb|tFP| -- počet nepravdivo pozitívnych inštancií,
\item \verb|tFN| -- počet nepravdivo negatívnych inštancií,
\item \verb|tPrecision| -- precíznosť rozhodovacieho stromu,
\item \verb|tPreval| -- hodnota `'prevalence'' z matice chybovosti rozhodovacieho stromu,
\item \verb|tRecall| -- citlivosť rozhodovacieho stromu,
\item \verb|tSpecificity| -- špecificita rozhodovacieho stromu.
\end{itemize}

Dovolené parametre sú:
\begin{itemize}
\item \verb|INDEX| -- index fitness funkcie v jedincovi,
\item \verb|DATA| -- dátová množina použitá na výpočet fitness funkcie. Jeho hodnota je buď -1 (celá množina), 0 (trénovacia množina), 1 (validačná množina).
\end{itemize}

\subsubsection*{Vyhodnotenie fitness funkcií}
Argumentom \verb|fit-comparator| (skupina 4.) definujeme to, ako budeme určovať kvalitu jedincov.
Dovolené komponenty sú 
\begin{itemize}
\item \verb|SINGLE| Kvalitu jedincov určujeme pomocou jednej vybranej fitness funkcie,
\item \verb|PRIORITY| Kvalitu jedincov určujeme fitness funkciami branými prioritne \ref{kap2:2.3:2.3.2:Priority},
\item \verb|WEIGHT| Kvalitu jedincov určujeme pomocou váženej hodnoty fitness funkcií \ref{kap2:2.3:2.3.1:Weighted}.
\end{itemize}

Parameter komponenty pozostáva z $n$ hodnôt, pričom $n = po\v cet funkcií$.

\subsubsection*{Kríženia a mutácie}
Argumentom \verb|xover-operators| (skupina 4.) definujeme operátory kríženia.
Dovolené komponenty (kríženia) sú: 
\begin{itemize}
\item \verb|dtX| -- žiadne kríženia (skopírovanie jedincov),
\item \verb|subTreeX|  -- kríženie podstromov.
\end{itemize}

Argumentom \verb|mut-operators| (skupina 4.) definujeme operátory mutácie.
Povolené komponenty (mutácie) sú:
\begin{itemize}
\item \verb|dtM| -- žiadna mutácia (skopírovanie jedincov),
\item \verb|ntlNomM|  -- mutácia podstromu na list (výstupný atribút je kategoriálny),
\item \verb|ntlNumM|  -- mutácia podstromu na list, (výstupný atribút je numerický),
\item \verb|wekaDSM|  -- mutácia uzlu na rozhodovací koreň,
\item \verb|valueMut| -- \textbf{POZOR!} experimentálna mutácia, ktorá náhodne zmení hodnotu klasifikácie v listu.
\end{itemize}

Dovolené parametre sú:
\begin{itemize}
\item \verb|PROB| Pravdepodobnosť operátora.
\item \verb|DATA| Dátová množina použitá pri práci s operátorom. Jeho hodnota je buď -1 (celá množina), 0 (trénovacia množina), 1 (validačná množina).
\end{itemize}

\subsection*{Selekcie}
Argumentom \verb|selectors| (skupina 4.) definujeme selekcie \ref{kap2:2.4:Selection} a argumentom \verb|env-selectors| (skupina 4.) definujeme selekcie prostredia \ref{kap2:2.4:2.4.4:EnvironmentalSelection}.
Dovolené komponenty sú 
\begin{itemize}
\item \verb|random| \textbf{POZOR!} experimentálny výber jedincov, ktorá vyberá jedincov náhodne.
\item \verb|Rw| Ruletová selekcia,
\item \verb|Tmt|  Turnajová selekcia.
\end{itemize}

Selekcie sú bez parametrov.

\subsubsection*{Inicializácia populácie}
Argumentom \verb|pop-init| (skupina 3.), definujeme inicializátory počiatočnej populácie.
Povolené komponenty sú 
\begin{itemize}
\item \verb|wCompTree| Rozhodovacie stromy sú zaradené do počiatočnej populácie bez zmeny,
\item \verb|wRanStump| Rozhodovacie korene sú medzi sebou spájané až dokým nedosiahnu určitú výšku.
\end{itemize}

Dovolené parametre sú:
\begin{itemize}
\item \verb|RESAMPLE| Podmnožiny, ktoré sú použité na vytvorenie jedincov, sú vytvorené výberom s opakovaním. Jeho hodnota je typu boolean,
\item \verb|AUTOHEIGHT| Na reprezentovanie rozhodovacích stromov sa použije trieda \verb|MultiWayDepthNode|. Jeho hodnota je typu boolean,
\item \verb|DIVIDEPARAM| Podmnožiny, ktoré sú použité na vytvorenie jedincov, sú získané rozdelením dátovej množiny na $n$ kúskov. Hodnota parametru je číslo $n$.
\item \verb|DATA| Dátová množina použitá pri práci s operátorom. Jeho hodnota je buď -1 (celá množina), 0 (trénovacia množina), 1 (validačná množina).
\end{itemize}

\subsubsection*{Generátor jedincov}
Argument s názvom \verb|ind-generator| (skupina 3.), ktorým definujeme fitness funkcie, ktoré budú použité na vyhodnotenie jedincov.
Dovolené komponenty sú 
\begin{itemize}
\item \verb|wJ48Gen| Rozhodovacie stromy sú generované pomocou algoritmu J48 z nástroja \verb|Weka|.
\end{itemize}

Parametre sú rovnaké ako pre algoritmus J48.
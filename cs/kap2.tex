\chapter{Genetické algoritmy}
Hlavným cieľom práce je optimalizovanie tvorby rozhodovacích stromov pomocou genetických algoritmov (GA). Preto 
v tejto kapitole predstavíme genetické algoritmy a podrobnejšie popíšeme jeho jednotlivé časti, ktoré budeme ďalej potrebovať v ďalšej kapitole.

Táto kapitola je delená do viacerých oddielov. V oddieli \ref{kap2:2.1:Info} popíšeme základné informácie o genetických algoritmoch. Genetické operátory používané v genetických algoritmoch zavedieme v oddieli \ref{kap2:2.2:Operators}. Rôzne druhy funkcií, používaných na vyhodnotenie jedincov, zadefinujeme v oddieli \ref{kap2:2.3:Fitnesses}. Ďalej v časti \ref{kap2:2.4:Selection} predvedieme najzákladnejšie metódy na výber jedincov. Nakoniec v časti \ref{kap2:2.5:Parameters} popíšeme problém výberu správnych parametrov v genetických algoritmoch.

\section{Základný popis genetických algoritmov}\label{kap2:2.1:Info}
Genetické algoritmy sú optimalizačné techniky a prehľadávacie heuristiky, ktoré napodobujú princíp prirodzeného výberu vychádzajúceho z darwinovskej teórie. V tomto oddieli ponúkneme úvod ku genetickým algoritmom s popisom, ako by mal taký genetický algoritmus vyzerať. Informácie o genetických algoritmoch sme čerpali z knihy \cite{kap2-evolution} a úvod do oblasti genetiky zase z voľne dostupnej učebnice biológie \cite{online-biology}. Ďalšie doplňujúce poznatky boli získané z online zdrojov \cite{wiki-evolution,wiki-genetics}.

V časti \ref{kap2:2.1:2.1.1:Genetics} najprv z pohľadu biológie vysvetlíme základné pojmy z genetiky. Ďalej v časti \ref{kap2:2.2:2.1.2:}.

\subsection{Genetika z pohľadu Biológie}\label{kap2:2.1:2.1.1:Genetics}
Na popísanie a zadefinovanie ďalších súčastí genetických algoritmov je dobré pripomenúť niektoré základné pojmy z oblasti genetiky. 

Bunka je základnou stavebnou jednotkou každého organizmu. Každá bunka má uložený popis toho ako sa má správať pri typických bunečných procesoch. Tento popis sa nazýva genetická informácia a v organizmoch je uskladnená v DNA, čo je obrovská molekula, polymér zložený z veľkého množstva pospájaných nukleotidov (kyselina fosforečná s deoxyribózou a naviazanou dusíkatou bázou). Tieto nukleotidy a konkrétne ich báze sú zodpovedné zato, ako vyzerá genetický kód tejto genetickej informácie. Malý kúsok vybraný zo sekvencie DNA, ktorý kóduje nejakú funkčnosť bunky alebo proces v bunke, sa nazýva gén. Presnejšie vyjadrenie by bolo, že gén je zodpovedný za tvorbu proteínov, ktoré sú ovplyvňujú funkčnosť bunky. Gén si je teda možné predstaviť ako významnú črtu organizmu (napríklad farba očí). Rôzne nastavenia génu nazývame alely (modré, hnedé, zelené oči).

DNA je kvôli jej veľkosti ďalej komprimovaná do štruktúry nazývaná chromozóm. Chromozóm sa nachádza v jadre bunky. Organizmy môžu mať v jadre viacero rôznych chromozómov. Podľa typu organizmu môžu byť tieto chromozómy spárované (diploidné organizmy) alebo nespárované (haploidné organizmy). Genóm organizmu potom nazývame genetický materiál získaný zo všetkých chromozómov dokopy. Určitá množina génov z genómu organizmu sa nazýva genotyp. Vo vývojovom štádiu jedinca ovplyvňuje genotyp výzor a ďalšie charakteristiky organizmu (výška, farba očí, IQ, ...), nazývané aj fenotyp.

\begin{figure}[h]
\centering
\centerline{\mbox{\includegraphics[width=250pt]{../img/kap2/DNA.pdf}}}
\caption{Na obrázku je príklad bunky s jadrom, v ktorom sú viditeľné chromozómy. Jeden z chromozómov je v spodnej časti roztiahnutý do DNA, ktorej jednotlivé časti sú popísané. Značky A,G,T predstavujú nukleotidové báze adenín, guanín a cytozín.}\label{fig:DNA}
\end{figure}

Úlohou každého živého organizmu je rozšíriť svoju genetickú informáciu a tým pádom aj jeho gény. Sexuálna reprodukcia dvoch rodičovských organizmov je komplikovaný proces (zdroj \cite{online-shuffling} podáva rozumné vysvetlenie celého procesu). Konkrétne nás budú zaujímať dve štádia reprodukcie, ktoré funguje na úrovni chromozómov.
\begin{itemize}
\item Kríženie jednoduchých buniek alebo komplexných živočíchov, kde každá dvojica chromozómov si medzi sebou vymieňa gény a vytvára nové chromozómy.
\item Mutácia vytvorených chromozómov, pri ktorej sú niektoré nukleotidy pozmenené kvôli chýbam pri krížení.
\end{itemize}
Po reprodukcii dostávame nové chromozómy, ktoré tvoria genóm novo vytvoreného organizmu. Na obrázku \ref{fig:Chromosomes} je príklad reprodukcie nespárovaných chromozómov pre haploidné organizmy.

\begin{figure}[h]
\centering
\centerline{\mbox{\includegraphics[width=350pt]{../img/kap2/chromosomes.pdf}}}
\caption{Príklad zjednodušeného procesu reprodukcie chromozómov pre nového jedinca. Na obrázku a) sú chromozómy z rodičov. Gény v chromozómoch na obrázku b) sú vyznačené čiernymi plnými krúžkami. Kríženie génov v chromozómoch (vyznačené šípkami) a mutácia jedného z génov (šedý krúžok) je na obrázku c). Na obrázku d) sú vzniknuté chromozómy nového jedinca.}\label{fig:Chromosomes}
\end{figure}

Z biologického hľadiska je nutné popísať kvalitu nových organizmov. Tú je možné vyhodnotiť pomocou pravdepodobnosti, že sa jedinec dožije ďalšieho párenia. Ďalším kritériom môže byť plodnosť potomka.

\subsection{Popis genetických algoritmov}
V tejto časti zadefinujeme, čo sú to genetické algoritmy, pričom jednotlivé pojmy budú podobné tým, ktoré sme predstavili v predchádzajúcej časti. 

Genetické algoritmy patria medzi metaheuristiky, ktorých úlohou je prechádzať priestor riešení a z nich nájsť to najlepšie. Algoritmus pracuje s jedincami, na ktorých aplikujeme operátory kríženia a mutácie. Podľa kvality jedinca rozhodujeme, či sa bude s jedincom ďalej pracovať. V genetických algoritmoch získavame riešenia z jedincov po príslušnom dekódovaní. Jedinec a chromozóm sú v rámci genetických algoritmov synonymami. Kvalita vytvorených jedincov záleží na tom, ako dobre tento jedinec rieši po dekódovaní zadanú úlohu. Väčšina implementácií pracuje s jedincami, ktoré by sa dali popísať ako haploidné (nespárované chromozómy).

Tieto algoritmy fungujú v cykloch, ktoré predstavujú generácie. V každom cykle pracujeme s množinou jedincov, populáciou pre tú danú generáciu. V každej generácii sa snažíme zlepšiť aktuálne riešenie vytváraním nových jedincov. V konečnej generácii je vytvorená taká populácia, ktorá obsahuje tých najvhodnejších jedincov, medzi ktorými sa nachádza ten najlepší.

Každý problém môže mať odlišnú reprezentáciu jedincov. S týmto súvisí úloha, ako rozumne a správne zakódovať jedincov. Takýchto kódovaní je mnoho, no medzi najznámejšie patrí binárne kódovanie, znakové kódovanie, kódovanie reálnymi číslami, ale aj kódovanie pomocou stromov, gramatík a mnoho ďalších. Napríklad pri použití binárneho kódovania sú jedinci reprezentovaní ako bitové reťazce. V tomto prípade sú jednotlivé prvky alebo skupiny prvkov v tomto poli génmi jedinca. Alela je v prípade bitovej hodnoty 0 alebo 1. Pri iných reprezentáciách sú alely komplikovanejšie.

Kríženie v genetických algoritmoch je realizované výmenou hodnôt medzi rodičmi. To o aké hodnoty sa jedná záleží na zvolenej reprezentácií (hodnoty v reťazci, stromy, ...). Typ kríženia, ktorý môžeme použiť, závisí od zvoleného kódovania a od jeho reprezentácie jedincov. 
Mutácia je realizovaná zmenou hodnoty už v kríženom jedincovi, pričom podobne ako pri krížení je závislá na kódovaní jedincov a od použitej reprezentácie. 

Napríklad v prípade kódovania, pri ktorom sú jedinci reprezentovaní reťazcom je typ kríženia obmedzený na bodové a uniformné kríženie. Rozumnou mutáciou je v tomto prípade invertovanie bitu.

\subsection{Jednoduchý genetický algoritmus}
Podľa doposiaľ zadefinovaných pojmov môžeme predviesť, ako taký genetický algoritmus pracuje. Majme daný problém P, ktorý chceme vyriešiť. Pre zjednodušenie uvažujme jedincov s binárnym kódovaním. Zjednodušený Algoritmus \ref{fig:geneticAlgoritm} potom popisuje jednotlivé kroky genetického algoritmu, ktorý rieši problém P.
\begin{algorithm}
\floatname{algorithm}{Algoritmus}
\caption{Kroky zjednodušeného genetického algoritmu, ktorý pracuje s binárne kódovanými jedincami.}\label{fig:geneticAlgoritm}
$A$ - Aktuálna populácia \\
$O$ - Potomkovia \\
$k$ - Dĺžka reťazca/chromozómu/riešenia \\
$fP$ - Kritérium na vyhodnotenie jedincov pre problém $P$\\
$p_{k}$ - Pravdepodobnosť kríženia \\
$p_{m}$ - Pravdepodobnosť mutácie \\
$max\_gen$ - Maximálny počet generácií \\
$max\_pop$ - Maximálny počet jedincov v populácií \\
\begin{algorithmic}

\State \parbox[t]{400pt}{$A \gets $ náhodne vygenerovaná populácia s $n$ jedincami (každé z nich dĺžky $k$).}

\For{$i = 1$ kým $i \leq max\_gen$}
	\State Krok()
\EndFor
\\
\Procedure{Krok}{\mbox{}}
	\State $O \gets \{\}$
	\State Spočítaj kvalitu každého jedinca pomocou kritéria $fP$.	
	\While{$\lvert O \rvert < max\_pop$}
		\State \parbox[t]{350pt}{$J1,J2 \gets $ dva jedinci z populácie $A$ (výber s opakovaním). Pravdepodobnosť že vyberieme jedinca je úmerná hodnote kritéria $fP$.}
		\State \parbox[t]{350pt}{$O1,O2 \gets $ \textsc{Kríženie(J1,J2)}}
		\State \parbox[t]{350pt}{$O1,O2 \gets $ \textsc{Mutácia(O1,O2)}}
		\State $O \gets \{O1,O2\} \cup O$.
	\EndWhile
	\State $A \gets O$.
\EndProcedure
\\
\Function{Kríženie}{$J1$,$J2$} \\
\Return{\parbox[t]{350pt}{$O1, O2$, ktorí vznikli prekrížením rodičov $J1, J2$ s pravdepodobnosťou $p_{k}$ v ľubovoľnom mieste reťazca. Bez použitého kríženia bude $O1 \gets J1$ a $O2 \gets J2$.}}
\EndFunction
\\
\Function{Mutácia}{$J1$,$J2$} \\
\Return{\parbox[t]{350pt}{$O1, O2$, ktorí vznikli mutáciou jedincov $J1, J2$ v jednotlivých hodnotách reťazca. Mutácia je na hodnote v reťazci použitá s pravdepodobnosťou $p_{m}$.}}
\EndFunction
\end{algorithmic}
\end{algorithm}
Každá iterácia algoritmu predstavuje novú generáciu jedincov. Počet generácii závisí na typu úlohu, no zvyčajne ich býva 50 až 500. V poslednom behu algoritmu dostávame konečnú populáciu, v ktorej je viacero kvalitných jedincov. Na zreprodukovanie výsledkov je kvôli stochastickému správaniu algoritmu nutné zvoliť rovnaký seed (pri používaní pseudo náhodných generátorov). 

Väčšina genetických algoritmov pracuje podobne ako zjednodušený algoritmus. Najväčšia zmena býva vtom akú taktiku na výber jedincov a aké kríženie a mutáciu použijeme. Komplikovanejšie genetické algoritmy taktiež používajú princíp elitizmu, ktorý ovplyvňuje aké percento rodičovských jedincov sa dostane do ďalšej generácie.

\section{Kódovanie jedincov}\label{kap2:2.2:Coding}
\begin{itemize}
\item binárne, pri ktorom reprezentujeme jedinca bitovým reťazcom/poľom určitej dĺžky,
\item znakové, kde je jedinec reprezentovaný reťazcom, ktorého hodnoty sú z konečnej množiny symbolov,
\item celočíselné, kde je jedinec reprezentovaný reťazcom celočíselných hodnôt,
\item kódovanie s reálnymi číslami, pri ktorom reprezentujeme jedinca reťazcom, ktorého hodnoty sú reálne čísla,
\item stromové, kde sú jedince reprezentované ako stromy z teórie grafov,
\item a mnoho ďalších ako sú permutácie, matice, konečné automaty, neurónové siete,...
\end{itemize}

\section{Genetické operátory}\label{kap2:2.3:Operators}
V prípade kódovania, ktoré využíva reprezentáciu reťazcom môžeme použiť
\begin{itemize}
\item bodové kríženie, ktoré je založené na zvolení náhodných $n$ bodov. Takto zvolené body rozdelia reťazec na $n+1$ častí, pričom sa odpovedajúce časti vymenia s určitou pravdepodobnosťou. Tento typ kríženia sa ďalej pomenováva podľa počtu vybraných bodov (jednobodové, dvojbodové, ...).
\item uniformné kríženie, ktoré vypĺňa jednotlivé hodnoty z určitého rodiča. U každej položky hádžeme mincou, ktorá rozhoduje z ktorého rodiča hodnotu vyberieme.
\end{itemize}

\section{Vyhodnotenie jedincov}\label{kap2:2.4:Fitnesses}

\section{Výber jedincov}\label{kap2:2.5:Selection}

\section{Nastavenie správnych parametrov}\label{kap2:2.6:Parameters}

